{% set logstash_ip = salt['mine.get']('euw2a-prd-unixkingdom-logstash-1', 'network.interface_ip')['euw2a-prd-unixkingdom-logstash-1'] %}
{% set elasticsearch_ip = salt['mine.get']('euw2a-prd-unixkingdom-elasticsearch-1', 'network.interface_ip')['euw2a-prd-unixkingdom-elasticsearch-1'] %}
input {
  udp {
    host => "{{ logstash_ip }}"
    port => 10514
    codec => "json"
    type => "rsyslog"
  }
}

filter { }

output {
  if [type] == "rsyslog" {
    elasticsearch {
      hosts => [ "{{ elasticsearch_ip }}:9200" ]
    }
  }
}
